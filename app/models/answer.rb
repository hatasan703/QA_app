class Answer < ApplicationRecord
  belongs_to :user
  belongs_to :question
  validates :text, presence: true, length: { in: 1..4000 }

   # 自分の回答がBAに選定されたとき通知メソッド
   def ba_create_notification_by(current_user)
    notification = current_user.active_notifications.new(
    answer_id:self.id,
    visited_id:self.user.id,
    action:"best_answer"
    )
    notification.save if notification.valid?
   end

   INVALID_NAME_PARTS = %w(
    陰毛
    まんこ
    ま○こ
    ま〇こ
    まんk
    クリトリス
    ちんこ
    ちんぽ
    ちんk
    ちんちん
    チンポ
    ペニス
    きんたま
    肉棒
    勃起
    ボッキ
    精子
    射精
    ザーメン
    セックス
    SEX
    体位
    淫乱
    アナル
    anus
    おっぱい
    ノーパン
    乳首
    ちくび
    ビーチク
    自慰
    オナニ
    オナ二
    オナヌ
    マスターベーション
    しこって
    しこしこ
    脱げ
    ぬげ
    脱いで
    ぬいで
    脱ごう
    ぬごう
    喘いで
    あえいで
    クンニ
    フェラ
    まんぐり
    パイズリ
    風俗
    ふうぞく
    ふーぞく
    ソープ
    デリヘル
    ヘルス
    姦
    包茎
    ほうけい
    童貞
    どうてい
    どうてー
    どーてー
    どーてい
    性器
    処女
    やりまん
    乱交
    バイブ
    ローター
    パイパン
    中出し
    中田氏
    スカトロ
    糞
    うんこ
    パコパコ
    ホモ
    homo
    ぱいぱい
    ノーブラ
    手コキ
    手マン
    潮吹
    下乳
    横乳
    指マン
    きもい
    きめえ
    変態
    馬鹿
    バーカ
    ばーか
    baka
    fuck
    f*ck
    ファック
    不細工
    ぶさいく
    ブス
    気違い
    基地外
    ブタ
    くたばれ
    潰せ
    bitch
    ビッチ
    死す
    死な
    死ぬ
    しぬ
    死ね
    しね
    氏ね
    shine
    死の
    死ん
    ﾀﾋ
    殺さ
    殺し
    殺す
    ころす
    殺せ
    ころせ
    殺そ
    乞食
    ばばあ
    ばばぁ
    BBA
    くず
    大麻
    麻薬
    レイプ
    犯し
    せっくす
    ち　ん　こ
    引退おめ
    ちん　こ
    ち　んこ
    ゼックス
    ち/んこ
    ちん/こ
    せ●くす
    せ○くす
    援交
    ま/んこ
    まん/こ
    ち/ん/こ
    ま/ん/こ
    ち○こ
    ま○こ
    ち●こ
    ま●こ
    セ●クス
    セ○クス
    セッ●ス
    セッ○ス
    エンコ
    えんこ
    キ/チガイ
    キチ/ガイ
    キチガ/イ
    き/ちがい
    きち/がい
    きちが/い
    チンコ
    チ/ンコ
    チン/コ
    マ/ンコ
    マン/コ
    チ○コ
    チ●コ
    マ○コ
    マ●コ
    ち◯こ
    ま◯こ
    チ◯コ
    マ◯コ
    セ◯クス
    セッ◯ス
  )

  validates :text, format: { without: ::Regexp.union(INVALID_NAME_PARTS) }
end
